[mypy]
python_version = 3.10
warn_unreachable = True
warn_unused_ignores = True
warn_unused_configs = True
ignore_missing_imports = True

# Exclusions for legacy/dynamic surfaces to keep typecheck deterministic.
# Legacy pipeline:
# - app.py and visitors/* are pre-v2 orchestration.
# - services/metadata_reader.py is legacy mutagen glue.
# - providers/musicbrainz.py and providers/discogs.py are legacy clients.
# Dynamic mutagen backend typing (runtime-only):
# - services/tag_writer.py relies on optional imports with runtime guards.
# CLI stub:
# - commands/apply.py contains placeholder plan loading branches.
# Transaction helper is legacy and not yet typed.
exclude = (^tests/|^resonance/legacy/)

# NOTE: mypy does not currently support warn_unused_imports or unused-function/unused-class
# error codes. Keep these checks in ruff or another linter if needed.

[mypy-resonance.app]
ignore_errors = True

[mypy-resonance.visitors.*]
ignore_errors = True

[mypy-resonance.services.metadata_reader]
ignore_errors = True

[mypy-resonance.providers.musicbrainz]
ignore_errors = True

[mypy-resonance.providers.discogs]
ignore_errors = True

[mypy-resonance.services.tag_writer]
ignore_errors = True

[mypy-resonance.commands.apply]
ignore_errors = True

[mypy-resonance.infrastructure.transaction]
ignore_errors = True
